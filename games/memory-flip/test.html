<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®°å¿†ç¿»ç¿»ä¹ - æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #333; border-bottom: 2px solid #4ECDC4; padding-bottom: 10px; }
        h2 { color: #666; margin-top: 30px; }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .test-item:last-child { border-bottom: none; }
        .test-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }
        .test-item label {
            flex: 1;
            cursor: pointer;
        }
        .test-item.passed { color: #27ae60; }
        .test-item.failed { color: #e74c3c; }
        .status {
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .status.pending { background: #f39c12; color: white; }
        .status.passed { background: #27ae60; color: white; }
        .status.failed { background: #e74c3c; color: white; }
        .actions {
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        button.primary { background: #4ECDC4; color: white; }
        button.secondary { background: #95a5a6; color: white; }
        button:hover { opacity: 0.9; }
        #results {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        .iframe-container {
            margin-top: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        .iframe-container iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        .summary {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .summary-item {
            text-align: center;
        }
        .summary-item .count {
            font-size: 32px;
            font-weight: 800;
        }
        .summary-item .label {
            font-size: 12px;
            color: #666;
        }
        .summary-item.total .count { color: #3498db; }
        .summary-item.passed .count { color: #27ae60; }
        .summary-item.failed .count { color: #e74c3c; }
        .summary-item.pending .count { color: #f39c12; }
    </style>
</head>
<body>
    <h1>ğŸ´ è®°å¿†ç¿»ç¿»ä¹ - æµ‹è¯•é¡µé¢</h1>
    
    <div class="summary">
        <div class="summary-item total">
            <div class="count" id="total-count">0</div>
            <div class="label">æ€»æµ‹è¯•</div>
        </div>
        <div class="summary-item passed">
            <div class="count" id="passed-count">0</div>
            <div class="label">é€šè¿‡</div>
        </div>
        <div class="summary-item failed">
            <div class="count" id="failed-count">0</div>
            <div class="label">å¤±è´¥</div>
        </div>
        <div class="summary-item pending">
            <div class="count" id="pending-count">0</div>
            <div class="label">å¾…æµ‹</div>
        </div>
    </div>

    <div class="actions">
        <button class="primary" onclick="runAutoTests()">â–¶ è¿è¡Œè‡ªåŠ¨æµ‹è¯•</button>
        <button class="secondary" onclick="resetTests()">â†» é‡ç½®</button>
        <button class="secondary" onclick="window.open('index.html', '_blank')">ğŸ® æ‰“å¼€æ¸¸æˆ</button>
    </div>

    <div id="results"></div>

    <h2>ğŸ“‹ åŠŸèƒ½æµ‹è¯•ï¼ˆæ‰‹åŠ¨ï¼‰</h2>
    
    <div class="test-section">
        <h3>åŸºç¡€åŠŸèƒ½</h3>
        <div class="test-item"><input type="checkbox" id="t1"><label for="t1">é¡µé¢åŠ è½½æ—  JS é”™è¯¯</label></div>
        <div class="test-item"><input type="checkbox" id="t2"><label for="t2">é¡µé¢åŠ è½½æ—  404 èµ„æº</label></div>
        <div class="test-item"><input type="checkbox" id="t3"><label for="t3">6å¼ å¡ç‰‡æ­£ç¡®æ˜¾ç¤ºï¼ˆå…¥é—¨éš¾åº¦ï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t4"><label for="t4">å¡ç‰‡åˆå§‹çŠ¶æ€ä¸ºèƒŒé¢ï¼ˆæ˜¾ç¤º?ï¼‰</label></div>
    </div>

    <div class="test-section">
        <h3>ç¿»ç‰ŒåŠŸèƒ½</h3>
        <div class="test-item"><input type="checkbox" id="t5"><label for="t5">ç‚¹å‡»å¡ç‰‡å¯ä»¥ç¿»å¼€</label></div>
        <div class="test-item"><input type="checkbox" id="t6"><label for="t6">ç¿»å¼€æ˜¾ç¤ºåŠ¨ç‰© emoji</label></div>
        <div class="test-item"><input type="checkbox" id="t7"><label for="t7">3D ç¿»è½¬åŠ¨ç”»æ•ˆæœæ­£å¸¸</label></div>
        <div class="test-item"><input type="checkbox" id="t8"><label for="t8">ç¿»ç‰Œè®¡æ•°æ­£ç¡®å¢åŠ </label></div>
    </div>

    <div class="test-section">
        <h3>é…å¯¹åŠŸèƒ½</h3>
        <div class="test-item"><input type="checkbox" id="t9"><label for="t9">é…å¯¹æˆåŠŸæ—¶å¡ç‰‡ä¿æŒç¿»å¼€</label></div>
        <div class="test-item"><input type="checkbox" id="t10"><label for="t10">é…å¯¹å¤±è´¥æ—¶å¡ç‰‡ç¿»å›èƒŒé¢</label></div>
        <div class="test-item"><input type="checkbox" id="t11"><label for="t11">é…å¯¹æˆåŠŸæœ‰ç»¿è‰²è¾¹æ¡†æ•ˆæœ</label></div>
        <div class="test-item"><input type="checkbox" id="t12"><label for="t12">é…å¯¹è®¡æ•°æ­£ç¡®æ˜¾ç¤º</label></div>
    </div>

    <div class="test-section">
        <h3>è®¡åˆ†ç³»ç»Ÿ</h3>
        <div class="test-item"><input type="checkbox" id="t13"><label for="t13">é…å¯¹æˆåŠŸå¾—åˆ†å¢åŠ </label></div>
        <div class="test-item"><input type="checkbox" id="t14"><label for="t14">è¿å‡»æœ‰é¢å¤–åŠ åˆ†</label></div>
        <div class="test-item"><input type="checkbox" id="t15"><label for="t15">åˆ†æ•°æ˜¾ç¤ºæ­£ç¡®</label></div>
    </div>

    <div class="test-section">
        <h3>èƒœåˆ©åˆ¤å®š</h3>
        <div class="test-item"><input type="checkbox" id="t16"><label for="t16">æ‰€æœ‰é…å¯¹å®Œæˆåæ˜¾ç¤ºèƒœåˆ©å¼¹çª—</label></div>
        <div class="test-item"><input type="checkbox" id="t17"><label for="t17">èƒœåˆ©å¼¹çª—æ˜¾ç¤ºç¿»ç‰Œæ¬¡æ•°</label></div>
        <div class="test-item"><input type="checkbox" id="t18"><label for="t18">èƒœåˆ©å¼¹çª—æ˜¾ç¤ºæ˜Ÿæ˜Ÿè¯„çº§</label></div>
        <div class="test-item"><input type="checkbox" id="t19"><label for="t19">èƒœåˆ©æ—¶æœ‰äº”å½©çº¸å±‘æ•ˆæœ</label></div>
    </div>

    <div class="test-section">
        <h3>è§’è‰²äº’åŠ¨</h3>
        <div class="test-item"><input type="checkbox" id="t20"><label for="t20">å°ç‹ç‹¸è§’è‰²æ˜¾ç¤ºæ­£å¸¸</label></div>
        <div class="test-item"><input type="checkbox" id="t21"><label for="t21">æ¬¢è¿è¯­æ­£ç¡®æ˜¾ç¤º</label></div>
        <div class="test-item"><input type="checkbox" id="t22"><label for="t22">é…å¯¹æˆåŠŸæœ‰é¼“åŠ±è¯­</label></div>
        <div class="test-item"><input type="checkbox" id="t23"><label for="t23">èƒœåˆ©æ—¶æœ‰èƒœåˆ©è¯­</label></div>
    </div>

    <h2>âš™ï¸ ç³»ç»ŸåŠŸèƒ½æµ‹è¯•</h2>

    <div class="test-section">
        <h3>éš¾åº¦é€‰æ‹©</h3>
        <div class="test-item"><input type="checkbox" id="t24"><label for="t24">å…¥é—¨éš¾åº¦å¯ç‚¹å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t25"><label for="t25">æœªè§£é”éš¾åº¦æ˜¾ç¤ºé”å›¾æ ‡</label></div>
        <div class="test-item"><input type="checkbox" id="t26"><label for="t26">åˆ‡æ¢éš¾åº¦åæ¸¸æˆé‡ç½®</label></div>
    </div>

    <div class="test-section">
        <h3>ä¸»é¢˜é€‰æ‹©</h3>
        <div class="test-item"><input type="checkbox" id="t27"><label for="t27">æ£®æ—ä¸»é¢˜å¯ç‚¹å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t28"><label for="t28">æœªè§£é”ä¸»é¢˜æ˜¾ç¤ºé”å›¾æ ‡</label></div>
        <div class="test-item"><input type="checkbox" id="t29"><label for="t29">åˆ‡æ¢ä¸»é¢˜åå¡ç‰‡å†…å®¹å˜åŒ–</label></div>
    </div>

    <div class="test-section">
        <h3>æç¤ºåŠŸèƒ½</h3>
        <div class="test-item"><input type="checkbox" id="t30"><label for="t30">æç¤ºæŒ‰é’®åˆå§‹æœ‰ 3 æ¬¡</label></div>
        <div class="test-item"><input type="checkbox" id="t31"><label for="t31">ç‚¹å‡»æç¤ºé«˜äº®é…å¯¹å¡ç‰‡</label></div>
        <div class="test-item"><input type="checkbox" id="t32"><label for="t32">æç¤ºæ¬¡æ•°æ­£ç¡®å‡å°‘</label></div>
    </div>

    <div class="test-section">
        <h3>é‡æ–°å¼€å§‹</h3>
        <div class="test-item"><input type="checkbox" id="t33"><label for="t33">é‡æ–°å¼€å§‹æŒ‰é’®å¯ç‚¹å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t34"><label for="t34">ç‚¹å‡»åæ¸¸æˆé‡ç½®</label></div>
        <div class="test-item"><input type="checkbox" id="t35"><label for="t35">å¡ç‰‡é‡æ–°æ‰“ä¹±</label></div>
    </div>

    <h2>ğŸ“± å…¼å®¹æ€§æµ‹è¯•</h2>

    <div class="test-section">
        <h3>å“åº”å¼å¸ƒå±€</h3>
        <div class="test-item"><input type="checkbox" id="t36"><label for="t36">æ¡Œé¢ç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ>1024pxï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t37"><label for="t37">å¹³æ¿ç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ768-1024pxï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t38"><label for="t38">æ‰‹æœºç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ<768pxï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t39"><label for="t39">æ¨ªå±æ¨¡å¼æ˜¾ç¤ºæ­£å¸¸</label></div>
    </div>

    <div class="test-section">
        <h3>è§¦æ‘¸äº¤äº’</h3>
        <div class="test-item"><input type="checkbox" id="t40"><label for="t40">è§¦æ‘¸ç‚¹å‡»å¡ç‰‡æ­£å¸¸å“åº”</label></div>
        <div class="test-item"><input type="checkbox" id="t41"><label for="t41">è§¦æ‘¸æŒ‰é’®æ­£å¸¸å“åº”</label></div>
        <div class="test-item"><input type="checkbox" id="t42"><label for="t42">æ— åŒå‡»ç¼©æ”¾é—®é¢˜</label></div>
    </div>

    <div class="test-section">
        <h3>æµè§ˆå™¨å…¼å®¹</h3>
        <div class="test-item"><input type="checkbox" id="t43"><label for="t43">Chrome æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t44"><label for="t44">Safari æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t45"><label for="t45">Firefox æ­£å¸¸è¿è¡Œ</label></div>
    </div>

    <h2>ğŸ”’ éš”ç¦»æ€§æµ‹è¯•</h2>

    <div class="test-section">
        <h3>ä¸å½±å“å…¶ä»–æ¸¸æˆ</h3>
        <div class="test-item"><input type="checkbox" id="t46"><label for="t46">æ•°å­—æ¶ˆæ¶ˆä¹å¯æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t47"><label for="t47">ä¸»é¡µå¯æ­£å¸¸è®¿é—®</label></div>
        <div class="test-item"><input type="checkbox" id="t48"><label for="t48">æµè§ˆå™¨åé€€æŒ‰é’®æ­£å¸¸</label></div>
    </div>

    <h2>ğŸ’¾ æ•°æ®æŒä¹…åŒ–æµ‹è¯•</h2>

    <div class="test-section">
        <h3>LocalStorage</h3>
        <div class="test-item"><input type="checkbox" id="t49"><label for="t49">æ¸¸æˆè¿›åº¦ä¿å­˜åˆ° localStorage</label></div>
        <div class="test-item"><input type="checkbox" id="t50"><label for="t50">åˆ·æ–°é¡µé¢åè¿›åº¦ä¿æŒ</label></div>
        <div class="test-item"><input type="checkbox" id="t51"><label for="t51">æ‹¼å›¾ç¢ç‰‡æ”¶é›†æ­£ç¡®ä¿å­˜</label></div>
        <div class="test-item"><input type="checkbox" id="t52"><label for="t52">è§£é”è¿›åº¦æ­£ç¡®ä¿å­˜</label></div>
    </div>

    <script>
        // æ›´æ–°ç»Ÿè®¡
        function updateSummary() {
            const checkboxes = document.querySelectorAll('.test-item input[type="checkbox"]');
            let total = checkboxes.length;
            let passed = 0;
            let pending = 0;
            
            checkboxes.forEach(cb => {
                if (cb.checked) passed++;
                else pending++;
            });
            
            document.getElementById('total-count').textContent = total;
            document.getElementById('passed-count').textContent = passed;
            document.getElementById('pending-count').textContent = pending;
            document.getElementById('failed-count').textContent = 0;
        }

        // ç›‘å¬æ‰€æœ‰å¤é€‰æ¡†å˜åŒ–
        document.querySelectorAll('.test-item input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', updateSummary);
        });

        // é‡ç½®æµ‹è¯•
        function resetTests() {
            document.querySelectorAll('.test-item input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            document.getElementById('results').style.display = 'none';
            updateSummary();
        }

        // è‡ªåŠ¨æµ‹è¯•
        async function runAutoTests() {
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.textContent = 'ğŸ”„ è¿è¡Œè‡ªåŠ¨æµ‹è¯•...\n\n';

            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);

            await new Promise(resolve => {
                iframe.onload = () => setTimeout(resolve, 1000);
            });

            const win = iframe.contentWindow;
            const game = win.game;

            let passed = 0;
            let failed = 0;
            const total = 10;

            function log(msg, success) {
                results.textContent += `${success ? 'âœ…' : 'âŒ'} ${msg}\n`;
                if (success) passed++;
                else failed++;
            }

            // æµ‹è¯• 1: game å®ä¾‹å­˜åœ¨
            log('Game å®ä¾‹å­˜åœ¨', !!game);

            // æµ‹è¯• 2: å¡ç‰‡æ•°é‡æ­£ç¡®
            const expectedCards = game.gridSize.rows * game.gridSize.cols;
            log(`å¡ç‰‡æ•°é‡æ­£ç¡® (${game.cards.length}/${expectedCards})`, game.cards.length === expectedCards);

            // æµ‹è¯• 3: totalPairs æ­£ç¡®
            const expectedPairs = expectedCards / 2;
            log(`é…å¯¹æ•°é‡æ­£ç¡® (${game.totalPairs}/${expectedPairs})`, game.totalPairs === expectedPairs);

            // æµ‹è¯• 4: åˆå§‹åˆ†æ•°ä¸º 0
            log('åˆå§‹åˆ†æ•°ä¸º 0', game.score === 0);

            // æµ‹è¯• 5: åˆå§‹ç¿»ç‰Œæ¬¡æ•°ä¸º 0
            log('åˆå§‹ç¿»ç‰Œæ¬¡æ•°ä¸º 0', game.moves === 0);

            // æµ‹è¯• 6: æç¤ºæ¬¡æ•°ä¸º 3
            log('åˆå§‹æç¤ºæ¬¡æ•°ä¸º 3', game.hints === 3);

            // æµ‹è¯• 7: ä¸»é¢˜å·²è®¾ç½®
            log('ä¸»é¢˜å·²è®¾ç½®', !!game.currentTheme);

            // æµ‹è¯• 8: éš¾åº¦å·²è®¾ç½®
            log('éš¾åº¦å·²è®¾ç½®', !!game.currentLevel);

            // æµ‹è¯• 9: localStorage æœ‰è¿›åº¦
            const savedProgress = win.localStorage.getItem('memoryFlipProgress');
            log('localStorage è¿›åº¦å·²ä¿å­˜', !!savedProgress);

            // æµ‹è¯• 10: DOM å…ƒç´ æ­£ç¡®æ¸²æŸ“
            const boardEl = win.document.getElementById('game-board');
            const cardEls = boardEl ? boardEl.querySelectorAll('.memory-card') : [];
            log(`DOM å¡ç‰‡æ¸²æŸ“æ­£ç¡® (${cardEls.length}/${expectedCards})`, cardEls.length === expectedCards);

            // æ¸…ç†
            document.body.removeChild(iframe);

            // æ›´æ–°ç»Ÿè®¡
            results.textContent += `\n${'='.repeat(40)}\n`;
            results.textContent += `ğŸ“Š æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡\n`;
            
            document.getElementById('passed-count').textContent = passed;
            document.getElementById('failed-count').textContent = failed;

            if (passed === total) {
                results.textContent += 'ğŸ‰ æ‰€æœ‰è‡ªåŠ¨æµ‹è¯•é€šè¿‡ï¼\n';
            }
        }

        // åˆå§‹åŒ–
        updateSummary();
    </script>
</body>
</html>
