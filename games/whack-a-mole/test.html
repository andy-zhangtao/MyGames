<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠ±å›­ä¿å«æˆ˜ - æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #333; border-bottom: 2px solid #7CB342; padding-bottom: 10px; }
        h2 { color: #666; margin-top: 30px; }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .test-item:last-child { border-bottom: none; }
        .test-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }
        .test-item label { flex: 1; cursor: pointer; }
        .summary {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .summary-item { text-align: center; }
        .summary-item .count { font-size: 32px; font-weight: 800; }
        .summary-item .label { font-size: 12px; color: #666; }
        .summary-item.total .count { color: #3498db; }
        .summary-item.passed .count { color: #27ae60; }
        .summary-item.failed .count { color: #e74c3c; }
        .summary-item.pending .count { color: #f39c12; }
        .actions { margin: 20px 0; display: flex; gap: 10px; }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        button.primary { background: #7CB342; color: white; }
        button.secondary { background: #95a5a6; color: white; }
        button:hover { opacity: 0.9; }
        #results {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ» èŠ±å›­ä¿å«æˆ˜ - æµ‹è¯•é¡µé¢</h1>
    
    <div class="summary">
        <div class="summary-item total">
            <div class="count" id="total-count">0</div>
            <div class="label">æ€»æµ‹è¯•</div>
        </div>
        <div class="summary-item passed">
            <div class="count" id="passed-count">0</div>
            <div class="label">é€šè¿‡</div>
        </div>
        <div class="summary-item pending">
            <div class="count" id="pending-count">0</div>
            <div class="label">å¾…æµ‹</div>
        </div>
    </div>

    <div class="actions">
        <button class="primary" onclick="runAutoTests()">â–¶ è¿è¡Œè‡ªåŠ¨æµ‹è¯•</button>
        <button class="secondary" onclick="resetTests()">â†» é‡ç½®</button>
        <button class="secondary" onclick="window.open('index.html', '_blank')">ğŸ® æ‰“å¼€æ¸¸æˆ</button>
    </div>

    <div id="results"></div>

    <h2>ğŸ“‹ åŠŸèƒ½æµ‹è¯•ï¼ˆæ‰‹åŠ¨ï¼‰</h2>
    
    <div class="test-section">
        <h3>åŸºç¡€åŠŸèƒ½</h3>
        <div class="test-item"><input type="checkbox" id="t1"><label for="t1">é¡µé¢åŠ è½½æ—  JS é”™è¯¯</label></div>
        <div class="test-item"><input type="checkbox" id="t2"><label for="t2">é¡µé¢åŠ è½½æ—  404 èµ„æº</label></div>
        <div class="test-item"><input type="checkbox" id="t3"><label for="t3">9ä¸ªåœ°æ´æ­£ç¡®æ˜¾ç¤º</label></div>
        <div class="test-item"><input type="checkbox" id="t4"><label for="t4">å°å…”å­è§’è‰²æ˜¾ç¤ºæ­£å¸¸</label></div>
        <div class="test-item"><input type="checkbox" id="t5"><label for="t5">å¼€å§‹å¼¹çª—æ­£ç¡®æ˜¾ç¤º</label></div>
    </div>

    <div class="test-section">
        <h3>æ¸¸æˆå¼€å§‹</h3>
        <div class="test-item"><input type="checkbox" id="t6"><label for="t6">å¼€å§‹æ¸¸æˆæŒ‰é’®å¯ç‚¹å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t7"><label for="t7">ç‚¹å‡»åæ¸¸æˆå¼€å§‹</label></div>
        <div class="test-item"><input type="checkbox" id="t8"><label for="t8">åœ°é¼ å¼€å§‹éšæœºå‡ºç°</label></div>
        <div class="test-item"><input type="checkbox" id="t9"><label for="t9">è®¡æ—¶å™¨å¼€å§‹å€’è®¡æ—¶</label></div>
    </div>

    <div class="test-section">
        <h3>åœ°é¼ ç±»å‹</h3>
        <div class="test-item"><input type="checkbox" id="t10"><label for="t10">ğŸ¹ æ™®é€šåœ°é¼ å‡ºç°</label></div>
        <div class="test-item"><input type="checkbox" id="t11"><label for="t11">ğŸŒŸ é‡‘è‰²åœ°é¼ å‡ºç°</label></div>
        <div class="test-item"><input type="checkbox" id="t12"><label for="t12">ğŸŒˆ å½©è™¹åœ°é¼ å‡ºç°</label></div>
        <div class="test-item"><input type="checkbox" id="t13"><label for="t13">ğŸ’£ ç‚¸å¼¹å‡ºç°</label></div>
    </div>

    <div class="test-section">
        <h3>å‡»ä¸­æ•ˆæœ</h3>
        <div class="test-item"><input type="checkbox" id="t14"><label for="t14">ç‚¹å‡»åœ°é¼ å¯ä»¥å‡»ä¸­</label></div>
        <div class="test-item"><input type="checkbox" id="t15"><label for="t15">å‡»ä¸­åå¾—åˆ†å¢åŠ </label></div>
        <div class="test-item"><input type="checkbox" id="t16"><label for="t16">å‡»ä¸­æœ‰è§†è§‰ç‰¹æ•ˆ</label></div>
        <div class="test-item"><input type="checkbox" id="t17"><label for="t17">å‡»ä¸­ç‚¸å¼¹æ‰£åˆ†</label></div>
    </div>

    <div class="test-section">
        <h3>è¿å‡»ç³»ç»Ÿ</h3>
        <div class="test-item"><input type="checkbox" id="t18"><label for="t18">è¿ç»­å‡»ä¸­æ˜¾ç¤ºè¿å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t19"><label for="t19">è¿å‡»æœ‰é¢å¤–åŠ åˆ†</label></div>
        <div class="test-item"><input type="checkbox" id="t20"><label for="t20">æ‰“ç©ºé‡ç½®è¿å‡»</label></div>
    </div>

    <div class="test-section">
        <h3>é“å…·ç³»ç»Ÿ</h3>
        <div class="test-item"><input type="checkbox" id="t21"><label for="t21">â„ï¸ æ—¶é—´å†»ç»“é“å…·å¯ç”¨</label></div>
        <div class="test-item"><input type="checkbox" id="t22"><label for="t22">âœ¨ åŒå€å¾—åˆ†é“å…·å¯ç”¨</label></div>
        <div class="test-item"><input type="checkbox" id="t23"><label for="t23">ğŸ¢ å‡é€Ÿé“å…·å¯ç”¨</label></div>
    </div>

    <div class="test-section">
        <h3>æ¸¸æˆç»“æŸ</h3>
        <div class="test-item"><input type="checkbox" id="t24"><label for="t24">æ—¶é—´ç»“æŸæ˜¾ç¤ºç»“æœå¼¹çª—</label></div>
        <div class="test-item"><input type="checkbox" id="t25"><label for="t25">æ˜¾ç¤ºå‡»ä¸­æ¬¡æ•°</label></div>
        <div class="test-item"><input type="checkbox" id="t26"><label for="t26">æ˜¾ç¤ºæœ€é«˜è¿å‡»</label></div>
        <div class="test-item"><input type="checkbox" id="t27"><label for="t27">æ˜¾ç¤ºå‘½ä¸­ç‡</label></div>
        <div class="test-item"><input type="checkbox" id="t28"><label for="t28">æ˜¾ç¤ºæ˜Ÿæ˜Ÿè¯„çº§</label></div>
    </div>

    <h2>ğŸ“± å…¼å®¹æ€§æµ‹è¯•</h2>

    <div class="test-section">
        <h3>å“åº”å¼å¸ƒå±€</h3>
        <div class="test-item"><input type="checkbox" id="t29"><label for="t29">æ¡Œé¢ç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ>1024pxï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t30"><label for="t30">å¹³æ¿ç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ768-1024pxï¼‰</label></div>
        <div class="test-item"><input type="checkbox" id="t31"><label for="t31">æ‰‹æœºç«¯æ˜¾ç¤ºæ­£å¸¸ï¼ˆ<768pxï¼‰</label></div>
    </div>

    <div class="test-section">
        <h3>è§¦æ‘¸äº¤äº’</h3>
        <div class="test-item"><input type="checkbox" id="t32"><label for="t32">è§¦æ‘¸ç‚¹å‡»åœ°é¼ æ­£å¸¸å“åº”</label></div>
        <div class="test-item"><input type="checkbox" id="t33"><label for="t33">è§¦æ‘¸æŒ‰é’®æ­£å¸¸å“åº”</label></div>
    </div>

    <div class="test-section">
        <h3>æµè§ˆå™¨å…¼å®¹</h3>
        <div class="test-item"><input type="checkbox" id="t34"><label for="t34">Chrome æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t35"><label for="t35">Safari æ­£å¸¸è¿è¡Œ</label></div>
    </div>

    <h2>ğŸ”’ éš”ç¦»æ€§æµ‹è¯•</h2>

    <div class="test-section">
        <div class="test-item"><input type="checkbox" id="t36"><label for="t36">æ•°å­—æ¶ˆæ¶ˆä¹å¯æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t37"><label for="t37">è®°å¿†ç¿»ç¿»ä¹å¯æ­£å¸¸è¿è¡Œ</label></div>
        <div class="test-item"><input type="checkbox" id="t38"><label for="t38">ä¸»é¡µå¯æ­£å¸¸è®¿é—®</label></div>
    </div>

    <script>
        function updateSummary() {
            const checkboxes = document.querySelectorAll('.test-item input[type="checkbox"]');
            let total = checkboxes.length;
            let passed = 0;
            let pending = 0;
            
            checkboxes.forEach(cb => {
                if (cb.checked) passed++;
                else pending++;
            });
            
            document.getElementById('total-count').textContent = total;
            document.getElementById('passed-count').textContent = passed;
            document.getElementById('pending-count').textContent = pending;
        }

        document.querySelectorAll('.test-item input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', updateSummary);
        });

        function resetTests() {
            document.querySelectorAll('.test-item input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            document.getElementById('results').style.display = 'none';
            updateSummary();
        }

        async function runAutoTests() {
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.textContent = 'ğŸ”„ è¿è¡Œè‡ªåŠ¨æµ‹è¯•...\n\n';

            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);

            await new Promise(resolve => {
                iframe.onload = () => setTimeout(resolve, 1500);
            });

            const win = iframe.contentWindow;
            const game = win.game;

            let passed = 0;
            let failed = 0;
            const total = 10;

            function log(msg, success) {
                results.textContent += `${success ? 'âœ…' : 'âŒ'} ${msg}\n`;
                if (success) passed++;
                else failed++;
            }

            log('Game å®ä¾‹å­˜åœ¨', !!game);
            log('åœ°æ´æ•°é‡ä¸º 9', win.document.querySelectorAll('.mole-hole').length === 9);
            log('åˆå§‹åˆ†æ•°ä¸º 0', game.score === 0);
            log('åˆå§‹å‡»ä¸­æ•°ä¸º 0', game.hits === 0);
            log('åˆå§‹è¿å‡»æ•°ä¸º 0', game.combo === 0);
            log('é“å…·æ•°é‡æ­£ç¡®', game.freezes === 2 && game.doubles === 1 && game.slows === 2);
            log('æ¸¸æˆæ¨¡å¼å·²è®¾ç½®', !!game.gameMode);
            log('éš¾åº¦å·²è®¾ç½®', !!game.difficulty);
            log('localStorage è¿›åº¦å·²ä¿å­˜', !!win.localStorage.getItem('whackAMoleProgress'));
            log('è§’è‰²é¢æ¿æ˜¾ç¤ºæ­£ç¡®', !!win.document.getElementById('character-panel'));

            document.body.removeChild(iframe);

            results.textContent += `\n${'='.repeat(40)}\n`;
            results.textContent += `ğŸ“Š æµ‹è¯•ç»“æœ: ${passed}/${total} é€šè¿‡\n`;
            
            document.getElementById('passed-count').textContent = passed;
            document.getElementById('failed-count').textContent = failed;

            if (passed === total) {
                results.textContent += 'ğŸ‰ æ‰€æœ‰è‡ªåŠ¨æµ‹è¯•é€šè¿‡ï¼\n';
            }
        }

        updateSummary();
    </script>
</body>
</html>
